import{_ as D}from"./DAiWPfT3.js";import{n as q,y as E,r as m,z as F,o as i,c as d,b as N,u as a,a as e,d as R,t as f,q as $,C as B,s as r,v as u,F as k,D as x,p as G,e as L,_ as P}from"./BQPsq2sp.js";const c=_=>(G("data-v-9b1a5faa"),_=_(),L(),_),A={class:"card shadow border-0 mb-7"},M={class:"card-body"},H={class:"d-flex justify-content-center"},O=["src"],Z={key:1,src:"https://t4.ftcdn.net/jpg/02/51/95/53/360_F_251955356_FAQH0U1y1TZw3ZcdPGybwUkH90a3VAhb.jpg",alt:"",width:"124",height:"72"},z={key:0,class:"my-2 text-center"},Q={class:"mb-2"},J={class:"d-flex flex-column align-items-center"},K={key:0,class:""},W=c(()=>e("label",{for:"file-upload",class:"custom-file-upload btn btn-primary btn-sm"}," อัพโหลดรูปภาพ ",-1)),X={key:1},Y={class:"mb-3"},ee=c(()=>e("label",{for:"exampleInputEmail1",class:"form-label"},"สินค้า",-1)),te={class:"row"},oe={class:"col-md-6"},se={class:"mb-3"},ae={class:"mb-3"},le=c(()=>e("label",{for:"exampleInputEmail1",class:"form-label"},"รหัสสินค้า",-1)),ne={class:"col-md-6"},ce={class:"mb-3"},ie=c(()=>e("label",{class:"form-label"},"จำนวน",-1)),de={class:"row"},re={class:"col-md-6"},ue={class:"mb-3"},pe=c(()=>e("label",{class:"form-label"},"ราคาทุน",-1)),me={class:"col-md-6"},_e={class:"mb-3"},fe=c(()=>e("label",{class:"form-label"},"ราคาขาย",-1)),he={class:"row"},ve={class:"col-md-6"},be={class:"mb-3"},ye=c(()=>e("label",{class:"form-label"},"หมวดหมู่",-1)),ge=["value","selected"],we={class:"col-md-6"},ke={class:"mb-3"},xe=c(()=>e("label",{class:"form-label"},"ประเภท",-1)),Se=c(()=>e("option",{value:"",disabled:"",selected:""},"เลือกประเภท",-1)),Ve=["value","selected"],Ue={class:"mb-3"},je=c(()=>e("label",{for:"",class:"form-label"},"รายละเอียด",-1)),Ce={class:"mb-3"},Te={class:"form-check"},Ie=["checked"],De=c(()=>e("label",{class:"form-check-label",for:"flexRadioDefault1"}," เปิดขาย ",-1)),qe={class:"form-check"},Ee=["checked"],Fe=c(()=>e("label",{class:"form-check-label",for:"flexRadioDefault2"}," ไม่เปิดขาย ",-1)),Ne=c(()=>e("button",{type:"submit",class:"btn btn-primary btn-sm"},"Submit",-1)),Re=q({__name:"[id]",setup(_){const b=E().params.id,t=m({id:null,name:"",barcode:"",is_active:1,price:0,category:"",sub_category:"",description:"",quantity:0,cost:0,file:null,file_path:""}),h=m(!1),p=m(void 0),y=m(null),g=m(null),S=async()=>{try{const o=await(await fetch("/api/category",{method:"GET",headers:{"Content-Type":"application/json"}})).json();y.value=o.data}catch(l){console.log(l)}},V=async l=>{try{const n=l.target.value;t.value.category=Number(n),await w(n)}catch(o){console.log(o)}},U=async l=>{try{const n=l.target.value;t.value.sub_category=Number(n)}catch(o){console.log(o)}},w=async l=>{try{const n=await(await fetch("/api/category/"+l+"/subcategory",{method:"GET",headers:{"Content-Type":"application/json"}})).json();g.value=n.data}catch(o){console.log(o)}},j=async()=>{try{console.log(t.value);const l=new FormData;t.value.file&&l.append("file",t.value.file),l.append("name",t.value.name),l.append("barcode",t.value.barcode),l.append("isActive",t.value.is_active?"1":"0"),l.append("price",t.value.price.toString()),l.append("category",t.value.category.toString()),l.append("sub_category",t.value.sub_category.toString()),l.append("description",t.value.description),l.append("quantity",t.value.quantity.toString()),l.append("cost",t.value.cost.toString());const n=await(await fetch(`/api/product/${b}`,{method:"POST",body:l})).json();console.log(n)}catch(l){console.log(l)}},C=async()=>{h.value=!0;try{const o=await(await fetch("/api/product/"+b,{method:"GET",headers:{"Content-Type":"application/json"}})).json();await S(),t.value=o.data,t.value.category=o.data.category.id,t.value.sub_category=o.data.sub_category.id,w(o.data.category)}catch(l){console.log(l)}finally{h.value=!1}},T=l=>{var s;const n=((s=l.target.files)==null?void 0:s[0])||null;t.value.file=n,n&&(p.value=URL.createObjectURL(n))},I=()=>{t.value.file=null,p.value=""};return F(()=>{C()}),(l,o)=>{const n=D;return i(),d("div",A,[N(n,{loading:a(h)},null,8,["loading"]),e("div",M,[R(f(a(t))+" ",1),e("form",{onSubmit:o[9]||(o[9]=$(s=>j(),["prevent"]))},[e("div",H,[a(p)||a(t).file_path?(i(),d("img",{key:0,src:a(p)?a(p):a(t).file_path,alt:"Uploaded Image",class:"mt-3 img-thumbnail",width:"124",height:"72"},null,8,O)):(i(),d("img",Z))]),a(t).file?(i(),d("p",z,f(a(t).file.name),1)):B("",!0),e("div",Q,[e("div",J,[a(t).file?(i(),d("div",X,[e("button",{class:"btn btn-danger btn-sm",onClick:o[0]||(o[0]=s=>I())},"ยกเลิก")])):(i(),d("div",K,[W,e("input",{id:"file-upload",type:"file",onChange:T},null,32)]))])]),e("div",Y,[ee,r(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":o[1]||(o[1]=s=>a(t).name=s)},null,512),[[u,a(t).name]])]),e("div",te,[e("div",oe,[e("div",se,[e("div",ae,[le,r(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":o[2]||(o[2]=s=>a(t).barcode=s)},null,512),[[u,a(t).barcode]])])])]),e("div",ne,[e("div",ce,[ie,r(e("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":o[3]||(o[3]=s=>a(t).quantity=s)},null,512),[[u,a(t).quantity]])])])]),e("div",de,[e("div",re,[e("div",ue,[pe,r(e("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":o[4]||(o[4]=s=>a(t).cost=s)},null,512),[[u,a(t).cost]])])]),e("div",me,[e("div",_e,[fe,r(e("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":o[5]||(o[5]=s=>a(t).price=s)},null,512),[[u,a(t).price]])])])]),e("div",he,[e("div",ve,[e("div",be,[ye,e("select",{class:"form-select form-select-sm",onChange:V},[(i(!0),d(k,null,x(a(y),(s,v)=>(i(),d("option",{value:s.id,key:v,selected:s.id==a(t).category},f(s==null?void 0:s.name),9,ge))),128))],32)])]),e("div",we,[e("div",ke,[xe,e("select",{class:"form-select form-select-sm",onChange:U},[Se,(i(!0),d(k,null,x(a(g),(s,v)=>(i(),d("option",{value:s.id,key:v,selected:s.id==a(t).sub_category},f(s==null?void 0:s.name),9,Ve))),128))],32)])])]),e("div",Ue,[je,r(e("textarea",{class:"form-control",cols:"30",rows:"3","onUpdate:modelValue":o[6]||(o[6]=s=>a(t).description=s)},null,512),[[u,a(t).description]])]),e("div",Ce,[e("div",Te,[e("input",{class:"form-check-input",type:"radio",checked:!!a(t).is_active,onClick:o[7]||(o[7]=s=>a(t).is_active=1)},null,8,Ie),De]),e("div",qe,[e("input",{class:"form-check-input",type:"radio",checked:!a(t).is_active,onClick:o[8]||(o[8]=s=>a(t).is_active=0)},null,8,Ee),Fe])]),Ne],32)])])}}}),Le=P(Re,[["__scopeId","data-v-9b1a5faa"]]);export{Le as default};
