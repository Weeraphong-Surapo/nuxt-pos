import{_ as I}from"./DAiWPfT3.js";import{n as T,r as _,z as D,o as i,c as d,b as q,u as a,a as e,d as F,t as v,q as E,C as B,s as u,v as m,F as g,D as k,p as L,e as N,_ as R}from"./BQPsq2sp.js";const c=p=>(L("data-v-0928c2eb"),p=p(),N(),p),$={class:"card shadow border-0 mb-7"},A={class:"card-body"},G={class:"d-flex justify-content-center"},M=["src"],P={key:1,src:"https://t4.ftcdn.net/jpg/02/51/95/53/360_F_251955356_FAQH0U1y1TZw3ZcdPGybwUkH90a3VAhb.jpg",alt:"",width:"124",height:"72"},H={key:0,class:"my-2 text-center"},O={class:"mb-2"},Z={class:"d-flex flex-column align-items-center"},z={key:0,class:""},Q=c(()=>e("label",{for:"file-upload",class:"custom-file-upload btn btn-primary btn-sm"}," อัพโหลดรูปภาพ ",-1)),J={key:1},K={class:"mb-3"},W=c(()=>e("label",{for:"exampleInputEmail1",class:"form-label"},"สินค้า",-1)),X={class:"row"},Y={class:"col-md-6"},ee={class:"mb-3"},te={class:"mb-3"},se=c(()=>e("label",{for:"exampleInputEmail1",class:"form-label"},"รหัสสินค้า",-1)),oe={class:"col-md-6"},le={class:"mb-3"},ae=c(()=>e("label",{class:"form-label"},"จำนวน",-1)),ne={class:"row"},ce={class:"col-md-6"},ie={class:"mb-3"},de=c(()=>e("label",{class:"form-label"},"ราคาทุน",-1)),re={class:"col-md-6"},ue={class:"mb-3"},me=c(()=>e("label",{class:"form-label"},"ราคาขาย",-1)),_e={class:"row"},pe={class:"col-md-6"},fe={class:"mb-3"},ve=c(()=>e("label",{class:"form-label"},"หมวดหมู่",-1)),he=c(()=>e("option",{value:"",disabled:"",selected:""},"เลือกหมวดหมู่",-1)),be=["value"],ye={class:"col-md-6"},ge={class:"mb-3"},ke=c(()=>e("label",{class:"form-label"},"ประเภท",-1)),we=c(()=>e("option",{value:"",disabled:"",selected:""},"เลือกประเภท",-1)),xe=["value"],Se={class:"mb-3"},Ve=c(()=>e("label",{for:"",class:"form-label"},"รายละเอียด",-1)),Ue={class:"mb-3"},Ce={class:"form-check"},je=["checked"],Ie=c(()=>e("label",{class:"form-check-label",for:"flexRadioDefault1"}," เปิดขาย ",-1)),Te={class:"form-check"},De=["checked"],qe=c(()=>e("label",{class:"form-check-label",for:"flexRadioDefault2"}," ไม่เปิดขาย ",-1)),Fe=c(()=>e("button",{type:"submit",class:"btn btn-primary btn-sm"},"Submit",-1)),Ee=T({__name:"create",setup(p){const t=_({id:null,name:"",barcode:"",is_active:1,price:0,category:"",sub_category:"",description:"",quantity:0,cost:0,file:null,file_path:""}),r=_(!1),f=_(""),b=_(null),y=_(null),w=async()=>{r.value=!0;try{const s=await(await fetch("/api/category",{method:"GET",headers:{"Content-Type":"application/json"}})).json();b.value=s.data}catch(l){console.log(l)}finally{r.value=!1}},x=async l=>{r.value=!0;try{const n=l.target.value;t.value.category=n,await V(n)}catch(s){console.log(s)}finally{r.value=!1}},S=async l=>{try{const n=l.target.value;t.value.sub_category=n}catch(s){console.log(s)}},V=async l=>{try{const n=await(await fetch("/api/category/"+l+"/subcategory",{method:"GET",headers:{"Content-Type":"application/json"}})).json();y.value=n.data}catch(s){console.log(s)}},U=async()=>{r.value=!0;try{const l=new FormData;t.value.file&&l.append("file",t.value.file),l.append("name",t.value.name),l.append("barcode",t.value.barcode),l.append("isActive",t.value.is_active?"1":"0"),l.append("price",t.value.price.toString()),l.append("category",t.value.category.toString()),l.append("sub_category",t.value.sub_category.toString()),l.append("description",t.value.description),l.append("quantity",t.value.quantity.toString()),l.append("cost",t.value.cost.toString());const n=await(await fetch("/api/product",{method:"POST",body:l})).json();console.log(n)}catch(l){console.log(l)}finally{r.value=!1}},C=l=>{var o;const n=((o=l.target.files)==null?void 0:o[0])||null;t.value.file=n,n&&(f.value=URL.createObjectURL(n))},j=()=>{t.value.file=null,f.value=""};return D(()=>{w()}),(l,s)=>{const n=I;return i(),d("div",$,[q(n,{loading:a(r)},null,8,["loading"]),e("div",A,[F(v(a(t))+" ",1),e("form",{onSubmit:s[9]||(s[9]=E(o=>U(),["prevent"]))},[e("div",G,[a(f)?(i(),d("img",{key:0,src:a(f),alt:"Uploaded Image",class:"mt-3 img-thumbnail",width:"124",height:"72"},null,8,M)):(i(),d("img",P))]),a(t).file?(i(),d("p",H,v(a(t).file.name),1)):B("",!0),e("div",O,[e("div",Z,[a(t).file?(i(),d("div",J,[e("button",{class:"btn btn-danger btn-sm",onClick:s[0]||(s[0]=o=>j())},"ยกเลิก")])):(i(),d("div",z,[Q,e("input",{id:"file-upload",type:"file",onChange:C},null,32)]))])]),e("div",K,[W,u(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[1]||(s[1]=o=>a(t).name=o)},null,512),[[m,a(t).name]])]),e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[se,u(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[2]||(s[2]=o=>a(t).barcode=o)},null,512),[[m,a(t).barcode]])])])]),e("div",oe,[e("div",le,[ae,u(e("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":s[3]||(s[3]=o=>a(t).quantity=o)},null,512),[[m,a(t).quantity]])])])]),e("div",ne,[e("div",ce,[e("div",ie,[de,u(e("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":s[4]||(s[4]=o=>a(t).cost=o)},null,512),[[m,a(t).cost]])])]),e("div",re,[e("div",ue,[me,u(e("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":s[5]||(s[5]=o=>a(t).price=o)},null,512),[[m,a(t).price]])])])]),e("div",_e,[e("div",pe,[e("div",fe,[ve,e("select",{class:"form-select form-select-sm",onChange:x},[he,(i(!0),d(g,null,k(a(b),(o,h)=>(i(),d("option",{value:o.id,key:h},v(o==null?void 0:o.name),9,be))),128))],32)])]),e("div",ye,[e("div",ge,[ke,e("select",{class:"form-select form-select-sm",onChange:S},[we,(i(!0),d(g,null,k(a(y),(o,h)=>(i(),d("option",{value:o.id,key:h},v(o==null?void 0:o.name),9,xe))),128))],32)])])]),e("div",Se,[Ve,u(e("textarea",{class:"form-control",cols:"30",rows:"3","onUpdate:modelValue":s[6]||(s[6]=o=>a(t).description=o)},null,512),[[m,a(t).description]])]),e("div",Ue,[e("div",Ce,[e("input",{class:"form-check-input",type:"radio",checked:!!a(t).is_active,onClick:s[7]||(s[7]=o=>a(t).is_active=!0)},null,8,je),Ie]),e("div",Te,[e("input",{class:"form-check-input",type:"radio",checked:!a(t).is_active,onClick:s[8]||(s[8]=o=>a(t).is_active=!1)},null,8,De),qe])]),Fe],32)])])}}}),Ne=R(Ee,[["__scopeId","data-v-0928c2eb"]]);export{Ne as default};
