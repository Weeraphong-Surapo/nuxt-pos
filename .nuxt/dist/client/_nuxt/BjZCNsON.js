import{_ as V}from"./B8mqVfVr.js";import{n as j,y as E,r as i,z as k,o as u,c as p,b as B,u as a,d as A,t as f,a as t,q as D,s as M,v as F,D as b,F as G,E as L,x as O,p as $,e as q,A as z,_ as J}from"./DV78moFj.js";const m=l=>($("data-v-2fcd40de"),l=l(),q(),l),P={class:"card shadow border-0 mb-7"},R=m(()=>t("div",{class:"card-header"},[t("h5",{class:"mb-0"},"แก้ไขประเภท")],-1)),U={class:"card-body"},H={class:"row"},K={class:"col-md-6"},Q={class:"mb-3"},W=m(()=>t("label",{for:"exampleInputEmail1",class:"form-label"},"ประเภท",-1)),X={class:"col-md-6"},Y={class:"mb-3"},Z=m(()=>t("label",{for:"exampleInputEmail1",class:"form-label"},"หมวดหมู่",-1)),ee=m(()=>t("option",{value:"",disabled:"",selected:""},"เลือกหมวดหมู่",-1)),te=["value","selected"],se=["disabled"],oe=j({__name:"[id]",setup(l){const w=z(),x=s=>{w.$toast.success(s,{position:"bottom-right",timeout:2500})},g=E(),o=i(null),_=i(!1),d=i(!1),v=i(null),C=async s=>{try{const c=s.target.value;o.value&&o.value.categorys?o.value.categorys.id=Number(c):console.warn("form.value or form.value.categorys is undefined")}catch(e){console.log(e)}},T=async()=>{var s,e,c;d.value=!0;try{const r={name:(s=o.value)==null?void 0:s.name,category:(c=(e=o.value)==null?void 0:e.categorys)==null?void 0:c.id},n=await(await fetch("/api/subcategory/"+g.params.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();x("อัพเดตสำเร็จ"),O({name:"category-subcategory"})}catch(r){console.log(r)}finally{d.value=!1}},I=async()=>{_.value=!0;try{await N();const e=await(await fetch("/api/subcategory/"+g.params.id,{method:"GET",headers:{"Content-Type":"application/json"}})).json();o.value=e.data}catch(s){console.log(s)}finally{_.value=!1}},N=async()=>{try{const e=await(await fetch("/api/category",{method:"GET",headers:{"Content-Type":"application/json"}})).json();v.value=e.data}catch(s){console.log(s)}};return k(()=>{I()}),(s,e)=>{var r,y;const c=V;return u(),p("div",P,[R,B(c,{loading:a(_)},null,8,["loading"]),A(" "+f(a(o))+" ",1),t("div",U,[t("form",{onSubmit:e[1]||(e[1]=D(n=>T(),["prevent"])),class:"position-relative"},[t("div",H,[t("div",K,[t("div",Q,[W,(r=a(o))!=null&&r.name?M((u(),p("input",{key:0,type:"text",class:"form-control form-control-sm","onUpdate:modelValue":e[0]||(e[0]=n=>a(o).name=n)},null,512)),[[F,a(o).name]]):b("",!0)])]),t("div",X,[t("div",Y,[Z,t("select",{class:"form-select form-select-sm",onChange:C},[ee,(y=a(o))!=null&&y.categorys?(u(!0),p(G,{key:0},L(a(v),(n,S)=>{var h;return u(),p("option",{value:n.id,key:S,selected:Number(n.id)==((h=a(o).categorys)==null?void 0:h.id)},f(n.name),9,te)}),128)):b("",!0)],32)])])]),t("button",{type:"submit",class:"btn btn-primary btn-sm",disabled:a(d)},f(a(d)?"กำลังอัพเดต...":"อัพเดต"),9,se)],32)])])}}}),ce=J(oe,[["__scopeId","data-v-2fcd40de"]]);export{ce as default};
