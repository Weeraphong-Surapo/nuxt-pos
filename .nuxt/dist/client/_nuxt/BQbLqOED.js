import{_ as b}from"./BDY35pRu.js";import{_ as T}from"./FrOfWjOF.js";import{n as k,r as u,B as E,o as p,c as v,b as a,w as h,a as o,d as x,C as D,u as f,T as N,F as $,A as B,z as j}from"./DV78moFj.js";const A={class:"btn-group"},I=["onClick"],L=k({__name:"TableCustomer",props:["customers","fetchCustomers","loading"],setup(c){const n=B(),l=e=>{n.$toast.success(e,{position:"bottom-right",timeout:2500})},t=u(!1),s=u(""),r=e=>{s.value=e,t.value=!0},i=[{text:"ชื่อ",value:"full_name",sortable:!0},{text:"เบอร์โทร",value:"phone"},{text:"ไลน์",value:"line"},{text:"ที่อยู่",value:"address"},{text:"สร้างวันที่",value:"createdDate"},{text:"จัดการ",value:"action"}],m=c,C=async()=>{try{const e=await fetch("/api/customer/"+s.value,{method:"DELETE",headers:{"Content-Type":"application/json"}});l("ลบข้อมูลสำเร็จ"),m.fetchCustomers()}catch(e){console.log(e)}finally{t.value=!1}};return(e,d)=>{const g=b,y=E("EasyDataTable"),w=T;return p(),v($,null,[a(y,{headers:i,items:c.customers,loading:c.loading,"theme-color":"#5c60f5","show-index":""},{"item-action":h(({id:_})=>[o("div",A,[a(g,{to:{name:"customer-id",params:{id:_}},class:"btn btn-warning btn-sm"},{default:h(()=>[x("แก้ไข")]),_:2},1032,["to"]),o("button",{class:"btn btn-danger btn-sm",type:"button",onClick:q=>r(_)}," ลบ ",8,I)])]),_:1},8,["items","loading"]),(p(),D(N,{to:"body"},[a(w,{deleteData:C,show:f(t),onClose:d[0]||(d[0]=_=>t.value=!1)},null,8,["show"])]))],64)}}}),M={class:"card shadow border-0 mb-7"},V={class:"card-header d-flex justify-content-between align-items-center"},F=o("h5",{class:"mb-0"},"ลูกค้าทั้งหมด",-1),z=o("i",{class:"bi bi-patch-plus fs-6 me-2"},null,-1),G={class:"card-body"},O={__name:"index",setup(c){const n=u(!1),l=u([]),t=async()=>{n.value=!0;try{const r=await(await fetch("/api/customer",{method:"GET",headers:{"Content-Type":"application/json"}})).json();l.value=r.data}catch(s){console.log(s)}finally{n.value=!1}};return j(()=>{t()}),(s,r)=>{const i=b,m=L;return p(),v("div",M,[o("div",V,[F,a(i,{class:"btn-primary btn btn-sm",to:{name:"customer-create"}},{default:h(()=>[z,x("เพิ่มลูกค้า")]),_:1})]),o("div",G,[a(m,{loading:f(n),fetchCustomers:t,customers:f(l)},null,8,["loading","customers"])])])}}};export{O as default};
