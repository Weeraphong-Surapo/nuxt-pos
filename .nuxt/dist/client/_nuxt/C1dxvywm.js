import{_ as g}from"./CK6ChEDz.js";import{_ as w}from"./DuVpJfMY.js";import{n as y,r as i,A as T,o as _,c as h,b as n,w as m,a,d as f,B as k,u as b,T as E,F as S,z as B}from"./BQPsq2sp.js";const D={class:"btn-group"},N=["onClick"],$=y({__name:"TableSubCategory",props:["sub_categorys","fetchSubCategorys","loading"],setup(c){const e=i(!1),o=i(""),r=[{text:"หมวดหมู่",value:"categorys.name",sortable:!0},{text:"ประเภท",value:"name",sortable:!0},{text:"จัดการ",value:"action"}],s=c,l=async()=>{try{console.log("hello");const t=await fetch("/api/subcategory/"+o.value,{method:"DELETE",headers:{"Content-Type":"application/json"}});s.fetchSubCategorys()}catch(t){console.log(t)}finally{e.value=!1}},u=t=>{o.value=t,e.value=!0};return(t,p)=>{const v=g,C=T("EasyDataTable"),x=w;return _(),h(S,null,[n(C,{headers:r,items:c.sub_categorys,loading:c.loading,"theme-color":"#5c60f5","show-index":""},{"item-action":m(({id:d})=>[a("div",D,[n(v,{to:{name:"category-subcategory-id",params:{id:d}},class:"btn btn-warning btn-sm"},{default:m(()=>[f("แก้ไข")]),_:2},1032,["to"]),a("button",{class:"btn btn-danger btn-sm",type:"button",onClick:z=>u(d)}," ลบ ",8,N)])]),_:1},8,["items","loading"]),(_(),k(E,{to:"body"},[n(x,{deleteData:l,show:b(e),onClose:p[0]||(p[0]=d=>e.value=!1)},null,8,["show"])]))],64)}}}),j={class:"card shadow border-0 mb-7"},L={class:"card-header d-flex justify-content-between align-items-center"},M=a("h5",{class:"mb-0"},"ประเภททั้งหมด",-1),V=a("i",{class:"bi bi-patch-plus fs-6 me-2"},null,-1),F={class:"card-body"},H=y({__name:"index",setup(c){const e=i([]),o=i(!1),r=async()=>{o.value=!0;try{const l=await(await fetch("/api/subcategory",{method:"GET",headers:{"Content-Type":"application/json"}})).json();e.value=l.data}catch(s){console.log(s)}finally{o.value=!1}};return B(()=>{r()}),(s,l)=>{const u=g,t=$;return _(),h("div",j,[a("div",L,[M,n(u,{class:"btn-primary btn btn-sm",to:{name:"category-subcategory-create"}},{default:m(()=>[V,f("เพิ่มประเภท")]),_:1})]),a("div",F,[n(t,{sub_categorys:b(e),fetchSubCategorys:r,loading:b(o)},null,8,["sub_categorys","loading"])])])}}});export{H as default};
