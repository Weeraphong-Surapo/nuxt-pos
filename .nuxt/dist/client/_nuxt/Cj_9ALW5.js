import{_ as N}from"./DAiWPfT3.js";import{n as V,y as j,r as i,z as I,o as u,c as p,b as k,u as o,d as E,t as v,a as t,q as B,s as D,v as M,C as b,F,D as G,x as L,p as O,e as q,_ as z}from"./BQPsq2sp.js";const m=l=>(O("data-v-30cb6780"),l=l(),q(),l),J={class:"card shadow border-0 mb-7"},P=m(()=>t("div",{class:"card-header"},[t("h5",{class:"mb-0"},"แก้ไขประเภท")],-1)),R={class:"card-body"},U={class:"row"},$={class:"col-md-6"},A={class:"mb-3"},H=m(()=>t("label",{for:"exampleInputEmail1",class:"form-label"},"ประเภท",-1)),K={class:"col-md-6"},Q={class:"mb-3"},W=m(()=>t("label",{for:"exampleInputEmail1",class:"form-label"},"หมวดหมู่",-1)),X=m(()=>t("option",{value:"",disabled:"",selected:""},"เลือกหมวดหมู่",-1)),Y=["value","selected"],Z=["disabled"],ee=V({__name:"[id]",setup(l){const f=j(),s=i(null),_=i(!1),d=i(!1),g=i(null),w=async a=>{try{const c=a.target.value;s.value&&s.value.categorys?s.value.categorys.id=Number(c):console.warn("form.value or form.value.categorys is undefined")}catch(e){console.log(e)}},C=async()=>{var a,e,c;d.value=!0;try{const r={name:(a=s.value)==null?void 0:a.name,category:(c=(e=s.value)==null?void 0:e.categorys)==null?void 0:c.id},n=await(await fetch("/api/subcategory/"+f.params.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();L({name:"category-subcategory"})}catch(r){console.log(r)}finally{d.value=!1}},x=async()=>{_.value=!0;try{await T();const e=await(await fetch("/api/subcategory/"+f.params.id,{method:"GET",headers:{"Content-Type":"application/json"}})).json();s.value=e.data}catch(a){console.log(a)}finally{_.value=!1}},T=async()=>{try{const e=await(await fetch("/api/category",{method:"GET",headers:{"Content-Type":"application/json"}})).json();g.value=e.data}catch(a){console.log(a)}};return I(()=>{x()}),(a,e)=>{var r,y;const c=N;return u(),p("div",J,[P,k(c,{loading:o(_)},null,8,["loading"]),E(" "+v(o(s))+" ",1),t("div",R,[t("form",{onSubmit:e[1]||(e[1]=B(n=>C(),["prevent"])),class:"position-relative"},[t("div",U,[t("div",$,[t("div",A,[H,(r=o(s))!=null&&r.name?D((u(),p("input",{key:0,type:"text",class:"form-control form-control-sm","onUpdate:modelValue":e[0]||(e[0]=n=>o(s).name=n)},null,512)),[[M,o(s).name]]):b("",!0)])]),t("div",K,[t("div",Q,[W,t("select",{class:"form-select form-select-sm",onChange:w},[X,(y=o(s))!=null&&y.categorys?(u(!0),p(F,{key:0},G(o(g),(n,S)=>{var h;return u(),p("option",{value:n.id,key:S,selected:Number(n.id)==((h=o(s).categorys)==null?void 0:h.id)},v(n.name),9,Y)}),128)):b("",!0)],32)])])]),t("button",{type:"submit",class:"btn btn-primary btn-sm",disabled:o(d)},v(o(d)?"กำลังอัพเดต...":"อัพเดต"),9,Z)],32)])])}}}),ae=z(ee,[["__scopeId","data-v-30cb6780"]]);export{ae as default};
