import{_ as h}from"./CK6ChEDz.js";import{_ as y}from"./DuVpJfMY.js";import{n as w,r as u,A as T,o as d,c as b,b as n,w as _,a as o,d as v,B as k,u as p,T as E,F as D,z as B}from"./BQPsq2sp.js";const N={class:"btn-group"},$=["onClick"],j=w({__name:"TableCustomer",props:["customers","fetchCustomers","loading"],setup(c){const e=u(!1),s=u(""),l=t=>{s.value=t,e.value=!0},a=[{text:"ชื่อ",value:"full_name",sortable:!0},{text:"เบอร์โทร",value:"phone"},{text:"ไลน์",value:"line"},{text:"ที่อยู่",value:"address"},{text:"สร้างวันที่",value:"createdDate"},{text:"จัดการ",value:"action"}],r=c,i=async()=>{try{const t=await fetch("/api/customer/"+s.value,{method:"DELETE",headers:{"Content-Type":"application/json"}});r.fetchCustomers()}catch(t){console.log(t)}finally{e.value=!1}};return(t,f)=>{const x=h,C=T("EasyDataTable"),g=y;return d(),b(D,null,[n(C,{headers:a,items:c.customers,loading:c.loading,"theme-color":"#5c60f5","show-index":""},{"item-action":_(({id:m})=>[o("div",N,[n(x,{to:{name:"customer-id",params:{id:m}},class:"btn btn-warning btn-sm"},{default:_(()=>[v("แก้ไข")]),_:2},1032,["to"]),o("button",{class:"btn btn-danger btn-sm",type:"button",onClick:z=>l(m)}," ลบ ",8,$)])]),_:1},8,["items","loading"]),(d(),k(E,{to:"body"},[n(g,{deleteData:i,show:p(e),onClose:f[0]||(f[0]=m=>e.value=!1)},null,8,["show"])]))],64)}}}),L={class:"card shadow border-0 mb-7"},M={class:"card-header d-flex justify-content-between align-items-center"},V=o("h5",{class:"mb-0"},"ลูกค้าทั้งหมด",-1),A=o("i",{class:"bi bi-patch-plus fs-6 me-2"},null,-1),F={class:"card-body"},H={__name:"index",setup(c){const e=u(!1),s=u([]),l=async()=>{e.value=!0;try{const r=await(await fetch("/api/customer",{method:"GET",headers:{"Content-Type":"application/json"}})).json();s.value=r.data}catch(a){console.log(a)}finally{e.value=!1}};return B(()=>{l()}),(a,r)=>{const i=h,t=j;return d(),b("div",L,[o("div",M,[V,n(i,{class:"btn-primary btn btn-sm",to:{name:"customer-create"}},{default:_(()=>[A,v("เพิ่มลูกค้า")]),_:1})]),o("div",F,[n(t,{loading:p(e),fetchCustomers:l,customers:p(s)},null,8,["loading","customers"])])])}}};export{H as default};
