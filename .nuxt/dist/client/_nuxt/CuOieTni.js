import{_ as y}from"./BDY35pRu.js";import{_ as k}from"./FrOfWjOF.js";import{n as h,r as i,B as E,o as b,c as f,b as n,w as p,a as s,d as v,C as N,u as g,T as S,F as $,A as B,z as D}from"./DV78moFj.js";const j={class:"btn-group"},A=["onClick"],L=h({__name:"TableSubCategory",props:["sub_categorys","fetchSubCategorys","loading"],setup(c){const r=B(),a=e=>{r.$toast.success(e,{position:"bottom-right",timeout:2500})},t=i(!1),o=i(""),l=[{text:"หมวดหมู่",value:"categorys.name",sortable:!0},{text:"ประเภท",value:"name",sortable:!0},{text:"จัดการ",value:"action"}],u=c,d=async()=>{try{console.log("hello");const e=await fetch("/api/subcategory/"+o.value,{method:"DELETE",headers:{"Content-Type":"application/json"}});u.fetchSubCategorys(),a("ลบข้อมูลสำเร็จ")}catch(e){console.log(e)}finally{t.value=!1}},x=e=>{o.value=e,t.value=!0};return(e,_)=>{const C=y,w=E("EasyDataTable"),T=k;return b(),f($,null,[n(w,{headers:l,items:c.sub_categorys,loading:c.loading,"theme-color":"#5c60f5","show-index":""},{"item-action":p(({id:m})=>[s("div",j,[n(C,{to:{name:"category-subcategory-id",params:{id:m}},class:"btn btn-warning btn-sm"},{default:p(()=>[v("แก้ไข")]),_:2},1032,["to"]),s("button",{class:"btn btn-danger btn-sm",type:"button",onClick:G=>x(m)}," ลบ ",8,A)])]),_:1},8,["items","loading"]),(b(),N(S,{to:"body"},[n(T,{deleteData:d,show:g(t),onClose:_[0]||(_[0]=m=>t.value=!1)},null,8,["show"])]))],64)}}}),M={class:"card shadow border-0 mb-7"},V={class:"card-header d-flex justify-content-between align-items-center"},F=s("h5",{class:"mb-0"},"ประเภททั้งหมด",-1),I=s("i",{class:"bi bi-patch-plus fs-6 me-2"},null,-1),z={class:"card-body"},K=h({__name:"index",setup(c){const r=i([]),a=i(!1),t=async()=>{a.value=!0;try{const l=await(await fetch("/api/subcategory",{method:"GET",headers:{"Content-Type":"application/json"}})).json();r.value=l.data}catch(o){console.log(o)}finally{a.value=!1}};return D(()=>{t()}),(o,l)=>{const u=y,d=L;return b(),f("div",M,[s("div",V,[F,n(u,{class:"btn-primary btn btn-sm",to:{name:"category-subcategory-create"}},{default:p(()=>[I,v("เพิ่มประเภท")]),_:1})]),s("div",z,[n(d,{sub_categorys:g(r),fetchSubCategorys:t,loading:g(a)},null,8,["sub_categorys","loading"])])])}}});export{K as default};
