{"version":3,"file":"index-ClFbAC8i.js","sources":["../../../../components/TableUser.vue","../../../../pages/user/index.vue"],"sourcesContent":["<template>\n  <EasyDataTable\n    :headers=\"headers\"\n    :items=\"users\"\n    :loading=\"loading\"\n    theme-color=\"#5c60f5\"\n    show-index\n  >\n    <template #item-action=\"{ id }\">\n      <div class=\"btn-group\">\n        <NuxtLink\n          :to=\"{ name: 'user-id', params: { id: id } }\"\n          class=\"btn btn-warning btn-sm\"\n          >แก้ไข</NuxtLink\n        >\n        <button\n          class=\"btn btn-danger btn-sm\"\n          type=\"button\"\n          @click=\"deleteUser(Number(id))\"\n        >\n          ลบ\n        </button>\n      </div>\n    </template>\n    <template #item-active=\"{id}\">\n        <button class=\"badge text-bg-success\">ปกติ</button>\n    </template>\n  </EasyDataTable>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Header } from \"vue3-easy-data-table\";\n\nconst headers: Header[] = [\n  { text: \"ชื่อ\", value: \"firstName\", sortable: true },\n  { text: \"ชื่อผู้ใช้งาน\", value: \"username\" },\n  { text: \"อีเมล\", value: \"email\" },\n  { text: \"เงินเดือน\", value: \"salary\" },\n  { text: \"สถานะ\", value: \"active\" },\n  // { text: \"WEIGHT (lbs)\", value: \"indicator.weight\"},\n  // { text: \"LAST ATTENDED\", value: \"lastAttended\", width: 200 },\n  { text: \"จัดการ\", value: \"action\" },\n];\n\nconst props = defineProps([\"users\", \"fetchUsers\", \"loading\"]);\n\nconst deleteUser = async (userId: Number) => {\n  try {\n    const response = await fetch(\"/api/user/\" + userId, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    props.fetchUsers();\n  } catch (error) {\n    console.log(error);\n  }\n};\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"card shadow border-0 mb-7\">\n    <div class=\"card-header d-flex justify-content-between align-items-center\">\n      <h5 class=\"mb-0\">ผู้ใช้งานทั้งหมด</h5>\n      <NuxtLink class=\"btn-primary btn btn-sm\" :to=\"{ name: 'user-create' }\">\n        <i class=\"bi bi-patch-plus fs-6 me-2\"></i>เพิ่มผู้ใช้งาน</NuxtLink\n      >\n    </div>\n\n    <div class=\"card-body\">\n      <TableUser :users=\"items\" :fetchUsers=\"getUsers\" :loading=\"loading\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nconst items = ref([]);\n\nconst showModal = ref(false);\n\nconst loading = ref<boolean>(false);\n\nconst getUsers = async () => {\n  loading.value = true;\n  try {\n    const response = await fetch(\"/api/user\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    items.value = data.data;\n    console.log(data.data);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  getUsers();\n});\n</script>\n<style scoped></style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,UAAM,UAAoB;AAAA,MACxB,EAAE,MAAM,QAAQ,OAAO,aAAa,UAAU,KAAK;AAAA,MACnD,EAAE,MAAM,iBAAiB,OAAO,WAAW;AAAA,MAC3C,EAAE,MAAM,SAAS,OAAO,QAAQ;AAAA,MAChC,EAAE,MAAM,aAAa,OAAO,SAAS;AAAA,MACrC,EAAE,MAAM,SAAS,OAAO,SAAS;AAAA;AAAA;AAAA,MAGjC,EAAE,MAAM,UAAU,OAAO,SAAS;AAAA,IAAA;AAGpC,UAAM,QAAQ;AAER,UAAA,aAAa,OAAO,WAAmB;AACvC,UAAA;AACF,cAAM,WAAW,MAAM,MAAM,eAAe,QAAQ;AAAA,UAClD,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AACD,cAAM,WAAW;AAAA,eACV,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MACnB;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzCI,UAAA,QAAQ,IAAI,CAAA,CAAE;AAEF,QAAI,KAAK;AAErB,UAAA,UAAU,IAAa,KAAK;AAElC,UAAM,WAAW,YAAY;AAC3B,cAAQ,QAAQ;AACZ,UAAA;AACI,cAAA,WAAW,MAAM,MAAM,aAAa;AAAA,UACxC,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AACK,cAAA,OAAO,MAAM,SAAS;AAC5B,cAAM,QAAQ,KAAK;AACX,gBAAA,IAAI,KAAK,IAAI;AAAA,eACd,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAAA,UACjB;AACA,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}