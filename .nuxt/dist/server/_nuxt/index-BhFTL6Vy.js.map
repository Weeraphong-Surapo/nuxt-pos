{"version":3,"file":"index-BhFTL6Vy.js","sources":["../../../../components/TableReportSaleProduct.vue","../../../../components/ChartCustomer.vue","../../../../components/ChartCategoryByProduct.vue","../../../../pages/report/index.vue"],"sourcesContent":["<template>\n  <EasyDataTable\n    :headers=\"headers\"\n    :items=\"items\"\n    :loading=\"loading\"\n    theme-color=\"#5c60f5\"\n    show-index\n  >\n  <!-- <template #item-action>\n    <div>\n        <button class=\"btn btn-outline-primary btn-sm\">View</button>\n    </div>\n  </template> -->\n  </EasyDataTable>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Header } from \"vue3-easy-data-table\";\n\nconst headers: Header[] = [\n  { text: \"สินค้า\", value: \"products_name\", sortable: true },\n  { text: \"ต้นทุน\", value: \"products_cost\" },\n  { text: \"ราคาขาย\", value: \"products_price\"},\n  { text: \"จำนวน\", value: \"total_price_quantity\"},\n  { text: \"ต้นทุน\", value: \"total_cost_product\"},\n  { text: \"ขายได้\", value: \"total_price_product\"},\n  { text: \"กำไร\", value: \"profit\"},\n  { text: \"ROI\", value: \"roi\" },\n  // { text: \"จัดการ\", value: \"action\" },\n];\n\nconst props = defineProps([\"items\", \"fetchData\", \"loading\"]);\n\n</script>\n\n<style scoped></style>\n","<template>\n  <div>\n    <Bar :data=\"chartData\" :options=\"chartOptions\" v-if=\"!loading\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { Bar } from \"vue-chartjs\";\nimport {\n  Chart as ChartJS,\n  Title,\n  Tooltip,\n  Legend,\n  BarElement,\n  CategoryScale,\n  LinearScale,\n} from \"chart.js\";\n\nChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale);\n\ndefineProps([\"loading\",\"chartData\"]);\n\nconst chartOptions = ref({\n  responsive: true,\n  maintainAspectRatio: false,\n});\n</script>\n","<template>\n  <div>\n    <Pie :data=\"chartData\" :options=\"chartOptions\" v-if=\"!loading\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { Bar, Pie } from \"vue-chartjs\";\nimport {\n  Chart as ChartJS,\n  Title,\n  Tooltip,\n  Legend,\n  BarElement,\n  CategoryScale,\n  LinearScale,\n  ArcElement,\n} from \"chart.js\";\n\nChartJS.register(Title, Tooltip, Legend, ArcElement);\n\ndefineProps([\"loading\", \"chartData\"]);\n\nconst chartOptions = ref({\n  responsive: true,\n  maintainAspectRatio: false,\n});\n</script>\n","<template>\n  <div class=\"card shadow border-0 mb-7\">\n    <Loader :loading=\"loading\" />\n    <div class=\"card-header\">\n      <h5 class=\"text-warning\">รายงานสรุปยอดขาย</h5>\n    </div>\n    <div class=\"card-body\">\n      <TableReportSaleProduct\n        :items=\"dataReportSaleProduct\"\n        :fetchData=\"fetchDataReportSaleProducts\"\n        :loading=\"loading\"\n      />\n    </div>\n  </div>\n  <div class=\"card shadow border-0 mb-7\">\n    <div class=\"card-header\">\n      <h5 class=\"text-warning\">รายงานสรุปการซื้อลูกค้า</h5>\n    </div>\n    <div class=\"card-body\">\n      <ChartCustomer :loading=\"loading\" :chartData=\"chartData\" />\n    </div>\n  </div>\n  <div class=\"card shadow border-0 mb-7\">\n    <div class=\"card-header\">\n      <h5 class=\"text-warning\">รายงานสรุปการขายประเภทสินค้า</h5>\n    </div>\n    <div class=\"card-body\">\n      <ChartCategoryByProduct\n        :loading=\"loading\"\n        :chartData=\"chartDataCategoryByProduct\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nconst loading = ref(false);\n\nconst dataReportCustomer = ref([]);\nconst dataReportCategoryByProduct = ref([]);\nconst dataReportSaleProduct = ref([]);\nconst chartData = ref({\n  labels: [],\n  datasets: [\n    {\n      label: \"ชื่อลูกค้า\",\n      backgroundColor: [\"#f87979\", \"#36a2eb\", \"#ffce56\", \"#4bc0c0\", \"#9966ff\", \"#ff6384\"],\n      data: [],\n    },\n  ],\n});\n\nconst chartDataCategoryByProduct = ref({\n  labels: [],\n  datasets: [\n    {\n      label: \"รายได้\",\n      backgroundColor: [\"#f87979\", \"#36a2eb\", \"#ffce56\", \"#4bc0c0\", \"#9966ff\", \"#ff6384\"],\n      data: [],\n    },\n  ],\n});\n\nconst fetchDataReportCustomer = async () => {\n  loading.value = true;\n  try {\n    await fetchDataReportCategoryByProduct();\n    await fetchDataReportSaleProducts();\n    const response = await fetch(\"/api/report/customer\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    dataReportCustomer.value = data.data;\n    updateChartData();\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst updateChartData = () => {\n  chartData.value.labels = dataReportCustomer.value.map(\n    (item) => item.customer_full_name || \"ไม่ระบุชื่อ\"\n  );\n  chartData.value.datasets[0].data = dataReportCustomer.value.map((item) =>\n    parseFloat(item.total_price_sum_vat)\n  );\n};\n\nconst fetchDataReportCategoryByProduct = async () => {\n  try {\n    const response = await fetch(\"/api/report/categorybyproduct\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    dataReportCategoryByProduct.value = data.data;\n    updateChartDataCategoryByProduct();\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n  }\n};\n\nconst updateChartDataCategoryByProduct = () => {\n  chartDataCategoryByProduct.value.labels = dataReportCategoryByProduct.value.map(\n    (item) => item.category_name || \"ไม่ระบุชื่อ\"\n  );\n  chartDataCategoryByProduct.value.datasets[0].data = dataReportCategoryByProduct.value.map(\n    (item) => parseFloat(item.total_price_category)\n  );\n};\n\nconst fetchDataReportSaleProducts = async () => {\n  try {\n    const response = await fetch(\"/api/report/product\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    dataReportSaleProduct.value = data.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nonMounted(() => {\n  fetchDataReportCustomer();\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"names":["ChartJS"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBA,UAAM,UAAoB;AAAA,MACxB,EAAE,MAAM,UAAU,OAAO,iBAAiB,UAAU,KAAK;AAAA,MACzD,EAAE,MAAM,UAAU,OAAO,gBAAgB;AAAA,MACzC,EAAE,MAAM,WAAW,OAAO,iBAAgB;AAAA,MAC1C,EAAE,MAAM,SAAS,OAAO,uBAAsB;AAAA,MAC9C,EAAE,MAAM,UAAU,OAAO,qBAAoB;AAAA,MAC7C,EAAE,MAAM,UAAU,OAAO,sBAAqB;AAAA,MAC9C,EAAE,MAAM,QAAQ,OAAO,SAAQ;AAAA,MAC/B,EAAE,MAAM,OAAO,OAAO,MAAM;AAAA;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;ACR9BA,UAAQ,SAAS,OAAO,SAAS,QAAQ,YAAY,eAAe,WAAW;AAI/E,UAAM,eAAe,IAAI;AAAA,MACvB,YAAY;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;ACNDA,UAAQ,SAAS,OAAO,SAAS,QAAQ,UAAU;AAInD,UAAM,eAAe,IAAI;AAAA,MACvB,YAAY;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACSD,UAAM,UAAU,IAAI,KAAK;AAEE,QAAI,EAAE;AACG,QAAI,EAAE;AAC1C,UAAM,wBAAwB,IAAI,CAAA,CAAE;AACpC,UAAM,YAAY,IAAI;AAAA,MACpB,QAAQ,CAAE;AAAA,MACV,UAAU;AAAA,QACR;AAAA,UACE,OAAO;AAAA,UACP,iBAAiB,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS;AAAA,UAClF,MAAM,CAAE;AAAA,QACT;AAAA,MACF;AAAA,IACH,CAAC;AAED,UAAM,6BAA6B,IAAI;AAAA,MACrC,QAAQ,CAAE;AAAA,MACV,UAAU;AAAA,QACR;AAAA,UACE,OAAO;AAAA,UACP,iBAAiB,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS;AAAA,UAClF,MAAM,CAAE;AAAA,QACT;AAAA,MACF;AAAA,IACH,CAAC;AAyDD,UAAM,8BAA8B,YAAY;AAC9C,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,uBAAuB;AAAA,UAClD,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UACjB;AAAA,QACP,CAAK;AACD,cAAM,OAAO,MAAM,SAAS;AAC5B,8BAAsB,QAAQ,KAAK;AAAA,MACpC,SAAQ,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}