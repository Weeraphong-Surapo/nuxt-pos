{"version":3,"file":"index-IZU9ArdU.js","sources":["../../../../components/TableCategory.vue","../../../../pages/category/index.vue"],"sourcesContent":["<template>\n  <EasyDataTable\n    :headers=\"headers\"\n    :items=\"categorys\"\n    :loading=\"loading\"\n    theme-color=\"#5c60f5\"\n    show-index\n  >\n    <template #item-action=\"{ id }\">\n      <div class=\"btn-group\">\n        <NuxtLink\n          :to=\"{ name: 'category-id', params: { id: id } }\"\n          class=\"btn btn-warning btn-sm\"\n          >แก้ไข</NuxtLink\n        >\n        <button class=\"btn btn-danger btn-sm\" type=\"button\" @click=\"confirmDelete(id)\">\n          ลบ\n        </button>\n      </div>\n    </template>\n  </EasyDataTable>\n\n  <Teleport to=\"body\">\n    <!-- use the modal component, pass in the prop -->\n\n    <ConfirmModal\n      :deleteData=\"deleteCategory\"\n      :show=\"showModal\"\n      @close=\"showModal = false\"\n    >\n    </ConfirmModal>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Header } from \"vue3-easy-data-table\";\ninterface Toast {\n  success: (message: string, options?: { position?: string; timeout?: number }) => void;\n}\nimport { useNuxtApp } from \"#app\";\nconst nuxtApp = useNuxtApp();\n\nconst showToast = (text: string) => {\n  const toastInstance = nuxtApp.$toast as Toast;\n  toastInstance.success(text, {\n    position: \"bottom-right\",\n    timeout: 2500,\n  });\n};\n\nconst loading = ref(false)\nconst showModal = ref(false);\nconst dataId = ref(\"\");\n\nconst confirmDelete = (id: string) => {\n  dataId.value = id;\n  showModal.value = true;\n};\n\nconst headers: Header[] = [\n  { text: \"หมวดหมู่\", value: \"name\", sortable: true },\n  { text: \"จัดการ\", value: \"action\" },\n];\n\nconst props = defineProps([\"categorys\", \"fetchCategory\", \"loading\"]);\n\nconst deleteCategory = async () => {\n  loading.value = true\n  try {\n    const response = await fetch(\"/api/category/\" + dataId.value, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    props.fetchCategory();\n  } catch (error) {\n    console.log(error);\n  }finally {\n    showToast(\"ลบข้อมูลสำเร็จ\")\n    showModal.value = false;\n    loading.value = false\n  }\n};\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"card shadow border-0 mb-7\">\n    <div class=\"card-header d-flex justify-content-between align-items-center\">\n      <h5 class=\"mb-0\">หมวดหมู่ทั้งหมด</h5>\n      <div class=\"\">\n        <!-- <button class=\"btn btn-sm btn-success\" @click=\"exportData\">Export Excel</button> -->\n        <button class=\"btn btn-sm btn-secondary\">Export PDF</button>\n        <button class=\"btn btn-sm btn-dark\"></button>\n      </div>\n      <NuxtLink class=\"btn-primary btn btn-sm\" :to=\"{ name: 'category-create' }\">\n        <i class=\"bi bi-patch-plus fs-6 me-2\"></i>เพิ่มหมวดหมู่</NuxtLink\n      >\n    </div>\n    <div class=\"card-body\">\n      <TableCategory\n        :categorys=\"items\"\n        :fetchCategory=\"getCategorys\"\n        :loading=\"loading\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { categoryData } from \"~/types/categoryType\";\nconst items = ref<categoryData[] | []>([]);\n\nconst loading = ref<boolean>(false);\n\nconst getCategorys = async () => {\n  loading.value = true;\n  try {\n    const response = await fetch(\"/api/category\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    items.value = data.data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  getCategorys();\n});\n</script>\n<style scoped></style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,UAAM,UAAU;AAEV,UAAA,YAAY,CAAC,SAAiB;AAClC,YAAM,gBAAgB,QAAQ;AAC9B,oBAAc,QAAQ,MAAM;AAAA,QAC1B,UAAU;AAAA,QACV,SAAS;AAAA,MAAA,CACV;AAAA,IAAA;AAGG,UAAA,UAAU,IAAI,KAAK;AACnB,UAAA,YAAY,IAAI,KAAK;AACrB,UAAA,SAAS,IAAI,EAAE;AAEf,UAAA,gBAAgB,CAAC,OAAe;AACpC,aAAO,QAAQ;AACf,gBAAU,QAAQ;AAAA,IAAA;AAGpB,UAAM,UAAoB;AAAA,MACxB,EAAE,MAAM,YAAY,OAAO,QAAQ,UAAU,KAAK;AAAA,MAClD,EAAE,MAAM,UAAU,OAAO,SAAS;AAAA,IAAA;AAGpC,UAAM,QAAQ;AAEd,UAAM,iBAAiB,YAAY;AACjC,cAAQ,QAAQ;AACZ,UAAA;AACF,cAAM,WAAW,MAAM,MAAM,mBAAmB,OAAO,OAAO;AAAA,UAC5D,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AACD,cAAM,cAAc;AAAA,eACb,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAAA,UAClB;AACC,kBAAU,gBAAgB;AAC1B,kBAAU,QAAQ;AAClB,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDI,UAAA,QAAQ,IAAyB,CAAA,CAAE;AAEnC,UAAA,UAAU,IAAa,KAAK;AAElC,UAAM,eAAe,YAAY;AAC/B,cAAQ,QAAQ;AACZ,UAAA;AACI,cAAA,WAAW,MAAM,MAAM,iBAAiB;AAAA,UAC5C,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AACK,cAAA,OAAO,MAAM,SAAS;AAC5B,cAAM,QAAQ,KAAK;AAAA,eACZ,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAAA,UACjB;AACA,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}