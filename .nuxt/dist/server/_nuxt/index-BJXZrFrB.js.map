{"version":3,"file":"index-BJXZrFrB.js","sources":["../../../../components/TableSubCategory.vue","../../../../pages/category/subcategory/index.vue"],"sourcesContent":["<template>\n  <EasyDataTable\n    :headers=\"headers\"\n    :items=\"sub_categorys\"\n    :loading=\"loading\"\n    theme-color=\"#5c60f5\"\n    show-index\n  >\n    <template #item-action=\"{ id }\">\n      <div class=\"btn-group\">\n        <NuxtLink\n          :to=\"{ name: 'category-subcategory-id', params: { id: id } }\"\n          class=\"btn btn-warning btn-sm\"\n          >แก้ไข</NuxtLink\n        >\n        <button class=\"btn btn-danger btn-sm\" type=\"button\" @click=\"confirmDelete(id)\">\n          ลบ\n        </button>\n      </div>\n    </template>\n  </EasyDataTable>\n\n  <Teleport to=\"body\">\n    <!-- use the modal component, pass in the prop -->\n\n    <ConfirmModal\n      :deleteData=\"deleteCategory\"\n      :show=\"showModal\"\n      @close=\"showModal = false\"\n    >\n    </ConfirmModal>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Header } from \"vue3-easy-data-table\";\ninterface Toast {\n  success: (message: string, options?: { position?: string; timeout?: number }) => void;\n}\nimport { useNuxtApp } from \"#app\";\nconst nuxtApp = useNuxtApp();\n\nconst showToast = (text: string) => {\n  const toastInstance = nuxtApp.$toast as Toast;\n  toastInstance.success(text, {\n    position: \"bottom-right\",\n    timeout: 2500,\n  });\n};\n\nconst showModal = ref(false);\nconst sub_category_id = ref(\"\");\n\nconst headers: Header[] = [\n  { text: \"หมวดหมู่\", value: \"categorys.name\", sortable: true },\n  { text: \"ประเภท\", value: \"name\", sortable: true },\n  // { text: \"WEIGHT (lbs)\", value: \"indicator.weight\"},\n  // { text: \"LAST ATTENDED\", value: \"lastAttended\", width: 200 },\n  { text: \"จัดการ\", value: \"action\" },\n];\n\nconst props = defineProps([\"sub_categorys\", \"fetchSubCategorys\", \"loading\"]);\n\nconst deleteCategory = async () => {\n  try {\n    console.log(\"hello\");\n\n    const response = await fetch(\"/api/subcategory/\" + sub_category_id.value, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    props.fetchSubCategorys();\n    showToast(\"ลบข้อมูลสำเร็จ\")\n  } catch (error) {\n    console.log(error);\n  } finally {\n    showModal.value = false;\n  }\n};\n\nconst confirmDelete = (subcategoryId: string) => {\n  sub_category_id.value = subcategoryId;\n  showModal.value = true;\n};\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"card shadow border-0 mb-7\">\n    <div class=\"card-header d-flex justify-content-between align-items-center\">\n      <h5 class=\"mb-0\">ประเภททั้งหมด</h5>\n      <!-- <div class=\"\">\n\n      </div> -->\n      <NuxtLink class=\"btn-primary btn btn-sm\" :to=\"{ name: 'category-subcategory-create' }\">\n        <i class=\"bi bi-patch-plus fs-6 me-2\"></i>เพิ่มประเภท</NuxtLink\n      >\n    </div>\n    <div class=\"card-body\">\n      <TableSubCategory\n        :sub_categorys=\"items\"\n        :fetchSubCategorys=\"getSubCategorys\"\n        :loading=\"loading\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { categoryData } from \"~/types/categoryType\";\nconst items = ref<categoryData[] | []>([]);\nconst loading = ref<boolean>(false);\n\n\n\nconst getSubCategorys = async () => {\n  loading.value = true;\n  try {\n    const response = await fetch(\"/api/subcategory\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    items.value = data.data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  getSubCategorys();\n});\n</script>\n<style scoped></style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,UAAM,UAAU;AAEV,UAAA,YAAY,CAAC,SAAiB;AAClC,YAAM,gBAAgB,QAAQ;AAC9B,oBAAc,QAAQ,MAAM;AAAA,QAC1B,UAAU;AAAA,QACV,SAAS;AAAA,MAAA,CACV;AAAA,IAAA;AAGG,UAAA,YAAY,IAAI,KAAK;AACrB,UAAA,kBAAkB,IAAI,EAAE;AAE9B,UAAM,UAAoB;AAAA,MACxB,EAAE,MAAM,YAAY,OAAO,kBAAkB,UAAU,KAAK;AAAA,MAC5D,EAAE,MAAM,UAAU,OAAO,QAAQ,UAAU,KAAK;AAAA;AAAA;AAAA,MAGhD,EAAE,MAAM,UAAU,OAAO,SAAS;AAAA,IAAA;AAGpC,UAAM,QAAQ;AAEd,UAAM,iBAAiB,YAAY;AAC7B,UAAA;AACF,gBAAQ,IAAI,OAAO;AAEnB,cAAM,WAAW,MAAM,MAAM,sBAAsB,gBAAgB,OAAO;AAAA,UACxE,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AACD,cAAM,kBAAkB;AACxB,kBAAU,gBAAgB;AAAA,eACnB,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAAA,UACjB;AACA,kBAAU,QAAQ;AAAA,MACpB;AAAA,IAAA;AAGI,UAAA,gBAAgB,CAAC,kBAA0B;AAC/C,sBAAgB,QAAQ;AACxB,gBAAU,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7Dd,UAAA,QAAQ,IAAyB,CAAA,CAAE;AACnC,UAAA,UAAU,IAAa,KAAK;AAIlC,UAAM,kBAAkB,YAAY;AAClC,cAAQ,QAAQ;AACZ,UAAA;AACI,cAAA,WAAW,MAAM,MAAM,oBAAoB;AAAA,UAC/C,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AACK,cAAA,OAAO,MAAM,SAAS;AAC5B,cAAM,QAAQ,KAAK;AAAA,eACZ,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAAA,UACjB;AACA,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}