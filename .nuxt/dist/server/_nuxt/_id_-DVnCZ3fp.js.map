{"version":3,"file":"_id_-DVnCZ3fp.js","sources":["../../../../pages/category/[id].vue"],"sourcesContent":["<template>\n  <div class=\"card shadow border-0 mb-7\">\n    <Loader :loading=\"loading\" />\n    <div class=\"card-body\">\n      <form @submit.prevent=\"updateCategory()\">\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">หมวดหมู่</label>\n          <input type=\"text\" class=\"form-control form-control-sm\" v-model=\"form.name\" />\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary btn-sm\" :disabled=\"loading\">{{ loading ? \"กำลังอัพเดต\" :\"อัพเดต\" }}</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { categoryFormData } from \"~/types/categoryType\";\ninterface Toast {\n  success: (message: string, options?: { position?: string; timeout?: number }) => void;\n}\nimport { useNuxtApp } from \"#app\";\nconst nuxtApp = useNuxtApp();\n\nconst showToast = (text: string) => {\n  const toastInstance = nuxtApp.$toast as Toast;\n  toastInstance.success(text, {\n    position: \"bottom-right\",\n    timeout: 2500,\n  });\n};\n\nconst router = useRoute();\nconst form = ref<categoryFormData>({\n  name: \"\",\n});\nconst loading = ref(false);\n\nconst updateCategory = async () => {\n  loading.value = true;\n  try {\n    const response = await fetch(\"/api/category/\" + router.params.id, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(form.value),\n    });\n    const data = await response.json();\n    showToast(\"อัพเดตสำเร็จ\");\n    navigateTo({name:'category'})\n  } catch (e) {\n    console.log(e);\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst getCategory = async () => {\n  loading.value = true;\n  try {\n    const response = await fetch(\"/api/category/\" + router.params.id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    form.value = data.data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  getCategory();\n});\n</script>\n\n<style scoped></style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA+Be,aAAS;AACxB,UAAM,OAAO,IAAsB;AAAA,MACjC,MAAM;AAAA,IAAA,CACP;AACK,UAAA,UAAU,IAAI,KAAK;;;;;;;;;;;;;;;"}