{"version":3,"file":"_id_-h-PSIJb9.js","sources":["../../../../pages/user/[id].vue"],"sourcesContent":["<template>\n  <div class=\"card shadow border-0 mb-7\">\n    <!-- <div class=\"card-header\">\n        <h5 class=\"mb-0\">Product Create</h5>\n      </div> -->\n    <Loader :loading=\"loading\" />\n    {{ form }}\n    <div class=\"card-body\">\n      <form @submit.prevent=\"updateUser()\">\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">ชื่อผู้ใช้</label>\n          <input\n            type=\"text\"\n            class=\"form-control form-control-sm\"\n            v-model=\"form.username\"\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">รหัสผ่าน</label>\n          <input\n            type=\"text\"\n            class=\"form-control form-control-sm\"\n            value=\"****************\"\n            disabled\n          />\n        </div>\n        <!-- <div class=\"border border-1 border-primary\"></div> -->\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div class=\"mb-3\">\n              <label for=\"exampleInputEmail1\" class=\"form-label\">ชื่อ</label>\n              <input\n                type=\"text\"\n                class=\"form-control form-control-sm\"\n                v-model=\"form.firstName\"\n              />\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"mb-3\">\n              <label for=\"exampleInputEmail1\" class=\"form-label\">นามสกุล</label>\n              <input\n                type=\"text\"\n                class=\"form-control form-control-sm\"\n                v-model=\"form.lastName\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">อีเมล</label>\n          <input type=\"text\" class=\"form-control form-control-sm\" v-model=\"form.email\" />\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">เงินเดือน</label>\n          <input type=\"text\" class=\"form-control form-control-sm\" v-model=\"form.salary\" />\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">สถานะ</label>\n          <select class=\"form-select form-select-sm\" @change=\"selectIsAdmin\">\n            <option value=\"0\" selected>พนักงาน</option>\n            <option value=\"1\">ผู้ดูแลร้าน</option>\n          </select>\n        </div>\n\n        <button class=\"btn btn-sm btn-primary\">บันทึก</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst loading = ref(false);\n\nconst router = useRoute();\n\nconst form = ref({\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  username: \"\",\n  password: \"\",\n  salary: \"\",\n  isAdmin: false,\n});\n\nconst selectIsAdmin = (event: Event) => {\n  const target = event.target as HTMLSelectElement;\n  const selectedValue = target.value;\n  form.value.isAdmin = selectedValue ? true : false;\n};\n\nconst getUser = async () => {\n  loading.value = true;\n  try {\n    const response = await fetch(\"/api/user/\" + router.params.id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await response.json();\n    form.value = data.data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst updateUser = async () => {\n  try {\n    const response = await fetch(\"/api/user/\" + router.params.id, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(form.value),\n    });\n    const data = await response.json();\n    console.log(data.data);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nonMounted(() => {\n  getUser();\n});\n</script>\n\n<style scoped></style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA0EM,UAAA,UAAU,IAAI,KAAK;AAEV,aAAS;AAExB,UAAM,OAAO,IAAI;AAAA,MACf,WAAW;AAAA,MACX,UAAU;AAAA,MACV,OAAO;AAAA,MACP,UAAU;AAAA,MACV,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,SAAS;AAAA,IAAA,CACV;;;;;;;;;;;;;;;"}